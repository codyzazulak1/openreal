function text_field(){
  var form = document.getElementById("options-tag");
  
  form.addEventListener("change", function(){
      var value = form.options[form.selectedIndex].value;
      if (value === 'other'){
        document.getElementById('div1').innerHTML='<input type="text" name="agent_form[company_name]" placeholder="Your company name" />';
        //document.getElementsByClassName('reveal')[1].style.display = "inherit"; 
        } else {
          document.getElementById('div1').innerHTML='';
        //  document.getElementsByClassName('reveal')[1].style.display = "none";
        }
  });//close form event
};

function text_field_forSelected_company(){
  var form = document.getElementById('options-tag');
  var value = form.options[form.selectedIndex].value;

  if (value === 'other') {
    document.getElementById('div1').innerHTML='<input type="text" name="agent_form[company_name]" placeholder="Your company name" />';
    } else {
        document.getElementById('div1').innerHTML='';
  }

}

function reset(){
  var form = document.getElementById("options-tag")
  var element = form.querySelectorAll("[type='submit']");
  // console.log(element);
  element.addEventListener("click", function(){
    form.reset();
  });
}


$(document).ready(function hide_form() {
  $("#agents").submit(function(e) {
      $("#agents").fadeOut(200, function(){
        $("#success").fadeIn();
      });
      
  });
});

function scrollIt() {
  $('a[href*="#"]:not([href="#"])').click(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
      var target = $(this.hash);
      target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
      if (target.length) {
        $('html, body').animate({
          scrollTop: target.offset().top
        }, 1000);
        return false;
      }
    }
  });
}


function grabCompanyChosen(){
  var companies = document.getElementById('company_name');

  companies.addEventListener('change', function(){
     var selectedComp = companies.options[companies.selectedIndex].value;
     
     // in case browser is accidentally refreshed
     if(sessionStorage.getItem("autosave")){
      selectedComp = sessionStorage.getItem("autosave")
     }
     sessionStorage.setItem("autosave", selectedComp)
  });
};

function selectCompany(){
  var form = document.getElementById('options-tag')
  var val = form.options[form.selectedIndex].value;
  // var company = getCompanyFromWelcomeIndex();
  var company = sessionStorage.getItem("autosave")

  if (company == val){
    // console.log('nothing here')
  } else {
    companyOptions = form.options
    for(var i, j = 0; i = companyOptions[j]; j++) {
      if(i.value == company) {
        companyOptions.selectedIndex = j;
        text_field_forSelected_company();
        $('html, body').animate({
        scrollTop: $("#form-signup").offset().top
        }, 1200); 
        break;
      }
    }
  }
  sessionStorage.removeItem("autosave") 

}
