<%= form_for [:dashboard, @property], html: {class: "dashboard-form clearfix", id: "property-form", multipart: true} do |f| %>
  <div class="float-left">
    <a href="<%= dashboard_properties_path %>?page=<%= request.parameters[:from].nil? ? '1' : request.parameters[:from] %>&filter=<%= request.parameters[:filter].nil? ? 'all' : request.parameters[:filter] %>" class="btn btn-secondary">Back</a>
  </div>
  <div class="float-right">
    <%= f.submit "Save", class: "btn btn-primary" %>
  </div>

  <ul class="accordion clear-both" data-accordion data-multi-expand="true" data-allow-all-closed="true">
    <li class="accordion-item is-active" data-accordion-item>
      <a href="#" class="accordion-title">Address</a>
      <div class="accordion-content" data-tab-content>
        <%= f.fields_for :address do |fa| %>
          <% @address_attributes.each do |a| %>
            <%= fa.label a %>
            <%= fa.text_field a.to_sym %>
          <% end %>
        <% end %>
      </div>
    </li>

    <li class="accordion-item" data-accordion-item>
      <a href="#" class="accordion-title">Basics</a>
      <div class="accordion-content" data-tab-content>
        <% @property_attributes.each do |u| %>
          <%= f.label u %>
          <%= f.text_field u.to_sym %>
          <%# if u.include? "status_id" %>
            <%#= f.label u %>
            <%#= f.select u, options_for_select(["first option", "second option", "third option"]), {:prompt => true} %>
          <%# end %>
        <% end %>
        <div>
          <div class="photo-contain">
            <% @property.photos.each do |photo|%>
              <%= image_tag(photo.picture_url, size: "250x250", style: "display: inline-block; padding: 2px;") if photo.picture?%>
              <p>
                  <%#= button_to "Delete", dashboard_photo_path(id: photo.id, property_id: @property.id), method: :delete %>
                  
              </p>
            <% end %>
            
          </div>
          <!-- This is field without the fields for -->
            <%#= f.label :picture, "Upload photos."%>            
            <%#= f.file_field :picture, multiple: true, name: "photos[picture][]"%>
            <%#= f.hidden_field :picture_cache %>
            
            <!-- this shit is with fields for -->
            <%=f.fields_for @property.photos do |fph|%>
              <%= fph.label :picture, 'Upload picture' %><br>
              <%= fph.file_field :picture, :multiple => true %>
              <%#= photo.hidden_field :picture_cache%>
            <% end %>

        </div>
         <%# end %>
      </div>
    </li>
  </ul>

  
  <div class="float-left">
    <a href="<%= dashboard_properties_path %>?page=<%= request.parameters[:from].nil? ? '1' : request.parameters[:from] %>&filter=<%= request.parameters[:filter].nil? ? 'all' : request.parameters[:filter] %>" class="btn btn-secondary">Back</a>
  </div>
  <div class="float-right">
    <%= f.submit "Save", class: "btn btn-primary" %>
  </div>
<%end%>
